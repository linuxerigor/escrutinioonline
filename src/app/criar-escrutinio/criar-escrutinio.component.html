
<h1  *ngIf="!smartcontract" class="cover-heading">Registrar no Bockchain</h1>
<p *ngIf="!smartcontract" class="lead">Inicie um escrutinio registrando no BlockChain da Ethereum</p>


<form *ngIf="!smartcontract" [formGroup]="dynamicForm" (ngSubmit)="onSubmit()">

            <div class="align-items-center">
              <div class="col-auto">
                <div class="form-group row">
                  <div class="col-8">
                    <label for="number" class="col-form-label">Número de votantes</label>
                  </div>
                  <div class="col-4">
                    <input type="number" id="number" min="0" formControlName="numbervotantes" class="form-control" >
                  </div>
                </div>
                <div class="form-group row">
                  <div class="col-8">
                    <label for="number" class="col-form-label">Número de candidatos</label>
                  </div>
                  <div class="col-4">
                    <input type="number" id="number" min="0" formControlName="numberOfTickets" class="form-control" (change)="onChangeTickets($event)" >
                  </div>
                </div>
              </div>
            </div>

          <div *ngFor="let ticket of t.controls; let i = index" class="">
              <div class="">
                  <div [formGroup]="ticket" class="form-row align-items-center">
                      <div class="form-group col-12">
                          <label class="lead">Candidato {{(i+1)}}</label>
                          <input type="text" formControlName="name" class="form-control" maxlength="30" />
                      </div>
                  </div>
              </div>
          </div>


          <p class="lead" *ngIf="dynamicForm.valid">
            <label *ngIf="submitted" >Este processo pode demorar</label><br>
            <button type="submit"  class="btn btn-lg btn-secondary" [disabled]="submitted">
              <span *ngIf="submitted" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
              {{submitted ? 'Aguarde...':'Criar escrutinio'}}
            </button>
          </p>
</form>

<div *ngIf="error" class="alert alert-danger" role="alert">
  Algum erro aconteceu!
</div>

<p *ngIf="smartcontract" class="lead">Seu processo de escrutinio foi criado</p>
<p *ngIf="smartcontract" class="lead">ID: {{smartcontract}}</p>
<p *ngIf="smartcontract" class="lead">
      <a href="#" [routerLink]="['/escrutinio',smartcontract]" class="btn btn-lg btn-secondary">Entrar</a>
</p>
